<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>مطعم نجف - Nagaf</title>
    <!-- الأيقونات والخطوط -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --blue: #1a237e; 
            --dark-blue: #0d1b6e; /* لون الفوتر */
            --red: #b71c1c;  
            --white: #ffffff; 
            --bg-gray: #f4f6f8; 
            --text: #333;
        }
        
        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: 'Cairo', sans-serif; 
            margin: 0; 
            background: var(--bg-gray); 
            padding-bottom: 0; /* الفوتر هياخد المساحة تحت */
        }

        /* --- الهيدر --- */
        header { 
            background: linear-gradient(135deg, #1a237e 0%, #283593 100%);
            color: var(--white); 
            padding: 10px 15px; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            position: sticky; 
            top: 0; 
            z-index: 1000; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.15); 
            height: 70px;
        }

        /* اللوجو المدور */
        .logo-container { display: flex; align-items: center; gap: 10px; }
        .logo-img {
            width: 50px; height: 50px;
            border-radius: 50%;
            border: 2px solid white;
            object-fit: cover;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            background: white;
        }
        .logo-text { font-weight: 700; font-size: 1.1rem; display: none; }
        @media (min-width: 400px) { .logo-text { display: block; } }
        
        /* أدوات المستخدم */
        .user-controls { display: flex; gap: 15px; align-items: center; }
        .icon-wrap { 
            position: relative; cursor: pointer; 
            width: 40px; height: 40px; 
            display: flex; align-items: center; justify-content: center;
            border-radius: 50%; transition: background 0.2s;
        }
        .icon-wrap:active { background: rgba(255,255,255,0.1); }
        .icon-wrap i { font-size: 1.4rem; }
        
        .badge { 
            position: absolute; top: 0; right: 0; 
            background: var(--red); color: white; 
            border-radius: 50%; width: 18px; height: 18px;
            font-size: 0.7rem; font-weight: bold; 
            display: flex; align-items: center; justify-content: center;
            border: 2px solid var(--blue);
        }

        /* زر البروفايل */
        .profile-btn {
            background: rgba(255,255,255,0.2); border-radius: 50%;
            width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center;
            cursor: pointer; border: 1px solid rgba(255,255,255,0.3);
        }
        .profile-btn i { font-size: 1.2rem; }

        /* --- البانر --- */
        .hero { 
            background: linear-gradient(rgba(26, 35, 126, 0.8), rgba(183, 28, 28, 0.6)), url('https://source.unsplash.com/800x600/?egyptian-food') center/cover;
            height: 160px; 
            display: flex; align-items: center; justify-content: center; 
            text-align: center; color: white; 
            border-radius: 0 0 25px 25px; margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .hero h1 { font-size: 1.8rem; margin: 0; font-weight: 700; text-shadow: 2px 2px 4px black; }
        .hero p { font-size: 0.9rem; opacity: 0.95; margin-top: 5px; }

        /* --- القوائم --- */
        .category-nav { display: flex; overflow-x: auto; padding: 5px 15px 15px; gap: 10px; scrollbar-width: none; }
        .category-nav::-webkit-scrollbar { display: none; }
        .cat-btn { 
            background: white; color: var(--text); border: 1px solid #e0e0e0;
            padding: 8px 20px; border-radius: 50px; font-size: 0.9rem; font-weight: 600; 
            cursor: pointer; flex-shrink: 0; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: 0.3s;
        }
        .cat-btn.active { background: var(--blue); color: white; border-color: var(--blue); }

        /* --- المنتجات --- */
        .container { padding: 0 15px; max-width: 800px; margin: 0 auto; min-height: 50vh; }
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .card { 
            background: white; border-radius: 15px; overflow: hidden; 
            box-shadow: 0 3px 10px rgba(0,0,0,0.08); display: flex; flex-direction: column;
        }
        .card img { width: 100%; height: 130px; object-fit: cover; }
        .card-body { padding: 12px; text-align: center; flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .card h3 { margin: 0 0 5px; font-size: 1rem; color: #333; font-weight: 700; }
        .price-tag { font-size: 0.9rem; color: var(--red); font-weight: 700; margin-bottom: 10px; }
        .btn-add { background: var(--blue); color: white; border: none; padding: 8px; width: 100%; border-radius: 8px; font-size: 0.9rem; cursor: pointer; font-weight: bold; }

        /* --- المودال --- */
        .modal { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.6); z-index: 2500; justify-content: center; align-items: center; 
            padding: 20px; backdrop-filter: blur(4px);
        }
        .modal-content { 
            background: white; padding: 25px; border-radius: 20px; 
            width: 100%; max-width: 380px; position: relative; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); animation: popUp 0.3s ease;
        }
        @keyframes popUp { from {transform: scale(0.9); opacity: 0;} to {transform: scale(1); opacity: 1;} }
        .close-btn { position: absolute; top: 15px; left: 15px; font-size: 1.5rem; color: #aaa; cursor: pointer; }
        
        .custom-input { width: 100%; padding: 12px; margin-bottom: 12px; border: 1px solid #ddd; border-radius: 10px; font-family: 'Cairo'; background: #fafafa; font-size: 1rem; }
        .btn-main { background: var(--blue); color: white; width: 100%; padding: 12px; border: none; border-radius: 10px; font-size: 1rem; font-weight: 700; cursor: pointer; margin-top: 10px; }
        .btn-danger { background: var(--red); color: white; padding:10px; width:100%; border:none; border-radius:10px; cursor:pointer; font-weight: 700; margin-top:5px; }

        /* --- الفوتر (جديد) --- */
        footer {
            background-color: var(--dark-blue);
            color: white;
            text-align: center;
            padding: 25px 0 30px 0; /* 30px من تحت كفاية عشان مفيش شات ثابت */
            margin-top: 40px;
            border-top: 4px solid var(--red);
        }
        .footer-hotline { font-size: 2rem; font-weight: 800; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; gap: 10px; }
        .footer-icons { display: flex; justify-content: center; gap: 25px; margin-bottom: 15px; }
        .footer-icons a { color: white; font-size: 2rem; text-decoration: none; transition: transform 0.2s; }
        .footer-icons a:hover { transform: scale(1.1); }
        .footer-copy { font-size: 1rem; opacity: 0.8; }

        /* --- الشات --- */
        .chat-float { position: fixed; bottom: 30px; left: 20px; background: var(--red); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 1.6rem; box-shadow: 0 4px 15px rgba(183, 28, 28, 0.4); z-index: 2000; cursor: pointer; border: 2px solid white; }
        .chat-window { display: none; position: fixed; bottom: 100px; left: 20px; width: 300px; height: 400px; background: white; border-radius: 15px; box-shadow: 0 5px 25px rgba(0,0,0,0.15); z-index: 2000; flex-direction: column; overflow: hidden; border: 1px solid #eee; }
    </style>
</head>
<body>

    <audio id="msgSound" src="https://assets.mixkit.co/active_storage/sfx/2346/2346-preview.mp3"></audio>

    <header>
        <div class="user-controls">
            <!-- السلة -->
            <div class="icon-wrap" onclick="openCart()">
                <i class="fas fa-shopping-basket"></i>
                <span class="badge" id="cartCount">0</span>
            </div>
            <!-- السجل -->
            <div class="icon-wrap" onclick="openMyOrders()">
                <i class="fas fa-receipt"></i>
            </div>
            <!-- زر الدخول (لغير المسجلين) -->
            <div id="loginBtnNav" class="profile-btn" onclick="openAuth()">
                <i class="fas fa-sign-in-alt"></i>
            </div>
            <!-- زر البروفايل (للمسجلين) -->
            <div id="userProfileNav" class="profile-btn" style="display:none;" onclick="openProfile()">
                <i class="fas fa-user"></i>
            </div>
        </div>

        <!-- اللوجو -->
        <div class="logo-container">
            <!-- تأكد إنك رفعت صورة اسمها logo.png -->
            <img src="logo.png" alt="Nagaf" class="logo-img" onerror="this.src='https://via.placeholder.com/50/8c0104/ffffff?text=N'">
            <div class="logo-text">سلسلة مطاعم نجف</div>
        </div>
    </header>

    <div class="hero">
        <div>
            <h1>أصل الأكل المصري</h1>
            <p>أطلب واستمتع بالطعم الأصلي</p>
        </div>
    </div>

    <!-- القوائم -->
    <div class="category-nav" id="categoryNav"></div>

    <!-- المنتجات -->
    <div class="container">
        <div class="grid" id="productGrid"></div>
    </div>

    <!-- ======================== الفوتر ======================== -->
    <footer>
        <div class="footer-hotline">
            <i class="fas fa-headset"></i> 19971
        </div>
        <div class="footer-icons">
            <a href="https://wa.me/201119008397" target="_blank"><i class="fab fa-whatsapp"></i></a>
            <a href="#" target="_blank"><i class="fab fa-facebook-f"></i></a>
        </div>
        <div class="footer-copy">نجف | 2025</div>
    </footer>

    <!-- 1. مودال التسجيل -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('authModal')">&times;</span>
            <h2 style="text-align:center; color:var(--blue); margin-top:0;">تسجيل جديد</h2>
            <input type="text" id="regName" class="custom-input" placeholder="الاسم">
            <input type="tel" id="regPhone" class="custom-input" placeholder="رقم الهاتف">
            <select id="regZone" class="custom-input">
                <option value="" disabled selected>اختر المنطقة</option>
                <option value="المعادي">المعادي</option>
                <option value="مدينة نصر">مدينة نصر</option>
                <option value="مصر الجديدة">مصر الجديدة</option>
                <option value="وسط البلد">وسط البلد</option>
                <option value="الهرم">الهرم</option>
                <option value="أخرى">منطقة أخرى</option>
            </select>
            <input type="text" id="regAddress" class="custom-input" placeholder="اسم الشارع ورقم العقار">
            <button class="btn-main" onclick="handleRegister()">حفظ البيانات</button>
        </div>
    </div>

    <!-- 2. مودال البروفايل -->
    <div class="modal" id="profileModal">
        <div class="modal-content" style="text-align:center;">
            <span class="close-btn" onclick="closeModal('profileModal')">&times;</span>
            <div style="width:80px; height:80px; background:#f0f0f0; border-radius:50%; margin:0 auto 15px; display:flex; align-items:center; justify-content:center; font-size:2.5rem; color:var(--blue);">
                <i class="fas fa-user-circle"></i>
            </div>
            <h3 id="profName" style="margin:5px 0;"></h3>
            <p id="profPhone" style="color:#666; margin:5px 0;"></p>
            <p id="profAddress" style="color:#666; font-size:0.9rem; margin-bottom:20px;"></p>
            <button class="btn-danger" onclick="logout()">تسجيل الخروج</button>
        </div>
    </div>

    <!-- 3. مودال النجاح -->
    <div class="modal" id="successModal">
        <div class="modal-content" style="text-align:center;">
            <i class="fas fa-check-circle" style="font-size:4rem; color:#27ae60; margin-bottom:15px; display:block;"></i>
            <h3 style="color:var(--blue); margin:10px 0;">تم الإرسال بنجاح!</h3>
            <p style="color:#555; font-size:1.1rem;">تابع حالة الطلب في السجل.</p>
            <button class="btn-main" onclick="closeSuccessModal()">حسناً</button>
        </div>
    </div>

    <!-- مودال الخيارات -->
    <div class="modal" id="optionsModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('optionsModal')">&times;</span>
            <h3 id="optProdName" style="color:var(--blue); text-align:center; margin-top:0;"></h3>
            <div id="variantsList" style="margin:15px 0; max-height:200px; overflow-y:auto;"></div>
            <h4 style="text-align:center; margin:10px 0;">السعر: <span id="selectedPrice" style="color:var(--red); font-size:1.2rem;">0</span> ج</h4>
            <button class="btn-main" onclick="confirmAddToCart()">أضف للسلة</button>
        </div>
    </div>

    <!-- مودال السلة -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('cartModal')">&times;</span>
            <h2 style="color:var(--blue); text-align:center; border-bottom:1px solid #eee; padding-bottom:10px;">سلة المشتريات</h2>
            <div id="cartItems" style="max-height:300px; overflow-y:auto; margin-bottom:15px;"></div>
            <div style="display:flex; justify-content:space-between; font-weight:bold; font-size:1.1rem; margin-bottom:15px;">
                <span>الإجمالي:</span>
                <span style="color:var(--red);"><span id="cartTotal">0</span> جنيه</span>
            </div>
            <button class="btn-main" onclick="submitOrder()">تأكيد الطلب</button>
        </div>
    </div>

    <!-- مودال السجل -->
    <div class="modal" id="ordersModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal('ordersModal')">&times;</span>
            <h2 style="text-align:center; color:var(--blue);">طلباتي السابقة</h2>
            <div id="ordersList" style="max-height:60vh; overflow-y:auto; background:#f9f9f9; padding:10px; border-radius:10px;"></div>
        </div>
    </div>

    <!-- الشات -->
    <div class="chat-float" onclick="toggleChat()"><i class="fas fa-headset"></i></div>
    <div class="chat-window" id="chatWindow">
        <div style="background:var(--blue); color:white; padding:12px; display:flex; justify-content:space-between;">
            <span style="font-weight:bold;">خدمة العملاء</span><span onclick="toggleChat()" style="cursor:pointer;">✖</span>
        </div>
        <div id="chatBody" style="flex:1; padding:10px; overflow-y:auto; background:#f9f9f9; display:flex; flex-direction:column; gap:8px;"></div>
        <div style="padding:10px; border-top:1px solid #ddd; display:flex;">
            <input type="text" id="chatInput" placeholder="اكتب..." style="width:100%; padding:8px; border:1px solid #ccc; border-radius:20px; margin-left:5px;">
            <button onclick="sendChat()" style="background:var(--blue); color:white; border:none; width:35px; height:35px; border-radius:50%;"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, set, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // إعدادات فايربيس
        const firebaseConfig = {
            apiKey: "AIzaSyAaf3l8VFttOCruK9jZczBsi1eBwg2U5yE",
            authDomain: "nagaf-f9b1c.firebaseapp.com",
            projectId: "nagaf-f9b1c",
            databaseURL: "https://nagaf-f9b1c-default-rtdb.firebaseio.com",
            storageBucket: "nagaf-f9b1c.appspot.com",
            messagingSenderId: "840123927886",
            appId: "1:840123927886:web:c6baad7f059cfab461e21f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        let cart = [];
        let currentUser = JSON.parse(localStorage.getItem('nagaf_user_info'));
        let products = [];
        let selectedProductTemp = null;
        let selectedVariantTemp = null;

        // --- تحميل المنتجات ---
        onValue(ref(db, 'products'), (snapshot) => {
            const data = snapshot.val() || {};
            products = Object.values(data);
            loadProducts('all');
        });

        // --- تحميل التصنيفات ---
        onValue(ref(db, 'categories'), (snapshot) => {
            const data = snapshot.val() || {};
            const nav = document.getElementById('categoryNav');
            nav.innerHTML = '<button class="cat-btn active" onclick="window.filterCat(\'all\', this)">الكل</button>';
            Object.values(data).forEach(c => {
                nav.innerHTML += `<button class="cat-btn" onclick="window.filterCat('${c.name}', this)">${c.name}</button>`;
            });
        });

        window.filterCat = function(cat, btn) {
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            loadProducts(cat);
        }

        window.loadProducts = function(cat) {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = '';
            products.forEach(p => {
                if((cat === 'all' || p.cat === cat) && p.available) {
                    const minPrice = p.variants ? Math.min(...p.variants.map(v=>v.price)) : 0;
                    grid.innerHTML += `
                        <div class="card" onclick="window.openOptions('${p.name}')">
                            <img src="${p.img}" alt="${p.name}">
                            <div class="card-body">
                                <h3>${p.name}</h3>
                                <div class="price-tag">يبدأ من ${minPrice} ج</div>
                                <button class="btn-add">أضف للسلة</button>
                            </div>
                        </div>`;
                }
            });
        }

        // --- إدارة المستخدم ---
        if(currentUser) setupUserUI();
        
        window.openAuth = function() { document.getElementById('authModal').style.display = 'flex'; }
        
        window.openProfile = function() {
            if(!currentUser) { openAuth(); return; }
            document.getElementById('profName').innerText = currentUser.name;
            document.getElementById('profPhone').innerText = currentUser.phone;
            document.getElementById('profAddress').innerText = currentUser.address;
            document.getElementById('profileModal').style.display = 'flex';
        }

        window.closeModal = function(id) { document.getElementById(id).style.display = 'none'; }

        window.logout = function() {
            localStorage.removeItem('nagaf_user_info');
            currentUser = null;
            location.reload();
        }
        
        window.handleRegister = function() {
            const name = document.getElementById('regName').value;
            const phone = document.getElementById('regPhone').value;
            const zone = document.getElementById('regZone').value;
            const address = document.getElementById('regAddress').value;

            if(name && phone && zone && address) {
                currentUser = { name: name, phone: phone, address: `${zone} - ${address}`, zone: zone };
                localStorage.setItem('nagaf_user_info', JSON.stringify(currentUser));
                push(ref(db, 'users'), { ...currentUser, role: 'customer' });
                setupUserUI();
                closeModal('authModal');
            } else {
                alert('يرجى ملء جميع البيانات');
            }
        }

        function setupUserUI() {
            document.getElementById('loginBtnNav').style.display = 'none';
            document.getElementById('userProfileNav').style.display = 'flex';
        }

        // --- السلة والخيارات ---
        window.openOptions = function(prodName) {
            selectedProductTemp = products.find(p => p.name === prodName);
            document.getElementById('optProdName').innerText = selectedProductTemp.name;
            const list = document.getElementById('variantsList');
            list.innerHTML = '';
            selectedProductTemp.variants.forEach((v, i) => {
                const borderStyle = i === 0 ? 'border:2px solid var(--blue); background:#eef;' : 'border:1px solid #ddd;';
                list.innerHTML += `
                <div onclick="selectVar(${i}, this)" 
                     style="padding:12px; margin-bottom:8px; border-radius:8px; cursor:pointer; display:flex; justify-content:space-between; align-items:center; ${borderStyle}"
                     data-price="${v.price}">
                    <span style="font-size:0.95rem;">${v.bread} - ${v.size}</span>
                    <span style="font-weight:bold; color:var(--red);">${v.price} ج</span>
                </div>`;
            });
            window.selectVar(0, list.children[0]);
            document.getElementById('optionsModal').style.display = 'flex';
        }

        window.selectVar = function(i, el) {
            Array.from(el.parentElement.children).forEach(c => { c.style.border = '1px solid #ddd'; c.style.background = 'white'; });
            el.style.border = '2px solid var(--blue)'; el.style.background = '#eef';
            selectedVariantTemp = selectedProductTemp.variants[i];
            document.getElementById('selectedPrice').innerText = selectedVariantTemp.price;
        }

        window.confirmAddToCart = function() {
            cart.push({...selectedProductTemp, variant: selectedVariantTemp});
            updateCart();
            closeModal('optionsModal');
        }

        function updateCart() {
            document.getElementById('cartCount').innerText = cart.length;
            const div = document.getElementById('cartItems');
            let total = 0;
            div.innerHTML = cart.map((i, idx) => {
                total += i.variant.price;
                return `<div style="display:flex;justify-content:space-between;border-bottom:1px solid #eee;padding:10px 0;"><div><b>${i.name}</b><br><small>${i.variant.bread}</small></div><div>${i.variant.price} ج <i class="fas fa-trash" style="color:red;margin-right:10px;" onclick="window.remItem(${idx})"></i></div></div>`;
            }).join('');
            document.getElementById('cartTotal').innerText = total;
        }

        window.remItem = function(i) { cart.splice(i,1); updateCart(); }
        window.openCart = function() { document.getElementById('cartModal').style.display = 'flex'; }

        // --- الطلب ---
        window.submitOrder = function() {
            if(!currentUser) { closeModal('cartModal'); return openAuth(); }
            if(cart.length === 0) return alert('السلة فارغة');
            
            const total = parseInt(document.getElementById('cartTotal').innerText);
            push(ref(db, 'orders'), {
                customerName: currentUser.name, phone: currentUser.phone, address: currentUser.address,
                items: cart, total: total, status: 'pending', timestamp: Date.now(), seenByAdmin: false
            }).then(() => {
                closeModal('cartModal');
                cart = []; updateCart();
                document.getElementById('successModal').style.display = 'flex'; // المودال الجديد
            }).catch(e => alert("حدث خطأ"));
        }

        window.closeSuccessModal = function() {
            document.getElementById('successModal').style.display = 'none';
            window.openMyOrders();
        }

        window.openMyOrders = function() {
            if(!currentUser) return openAuth();
            onValue(ref(db, 'orders'), (snap) => {
                const data = snap.val() || {};
                const list = document.getElementById('ordersList');
                list.innerHTML = '';
                const myOrders = Object.values(data).filter(o => o.phone === currentUser.phone).reverse();
                if(myOrders.length === 0) list.innerHTML = '<p style="text-align:center;">لا توجد طلبات</p>';
                myOrders.forEach(o => {
                    let st = o.status==='pending'?'انتظار':(o.status==='processing'?'تجهيز':(o.status==='completed'?'مكتمل':'ملغي'));
                    let clr = o.status==='pending'?'orange':(o.status==='processing'?'blue':(o.status==='completed'?'green':'red'));
                    list.innerHTML += `<div style="background:white;padding:10px;margin-bottom:10px;border-radius:10px;border-right:4px solid ${clr};"><b>${st}</b> - ${o.total}ج<br><small>${new Date(o.timestamp).toLocaleString()}</small></div>`;
                });
                document.getElementById('ordersModal').style.display = 'flex';
            });
        }

        window.toggleChat = function() {
            const w = document.getElementById('chatWindow');
            w.style.display = w.style.display === 'none' ? 'flex' : 'none';
            if(currentUser && w.style.display === 'flex') loadChat();
        }
        window.sendChat = function() {
            const t = document.getElementById('chatInput').value;
            if(t && currentUser) { push(ref(db, 'chats/'+currentUser.phone), {sender:'customer', text:t}); document.getElementById('chatInput').value=''; }
            else if(!currentUser) openAuth();
        }
        function loadChat() {
            onValue(ref(db, 'chats/'+currentUser.phone), (snap) => {
                const msgs = snap.val() || {};
                document.getElementById('chatBody').innerHTML = Object.values(msgs).map(m => `<div style="align-self:${m.sender==='customer'?'flex-start':'flex-end'};background:${m.sender==='customer'?'var(--blue)':'#ddd'};color:${m.sender==='customer'?'white':'black'};padding:8px 12px;border-radius:10px;margin:2px;max-width:80%;">${m.text}</div>`).join('');
            });
        }
    </script>
</body>
</html>
